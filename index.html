<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- jQuery library -->
    <script src="jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="bootstrap.min.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>DuesApp</title>
</head>
<body>
    <div class="row">
        <div class="col-sm-0 col-lg-2 ">
            <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>
        </div>
        <div id="cont" class="col-sm-12 col-lg-8 ">
            <canvas id="graph" height="200px"></canvas>
        </div>
        <div class="col-sm-0 col-lg-2 "></div>

        <!-- Modal -->
        <div id="myModal" class="modal fade" role="dialog">
                <div class="modal-dialog">
            
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Tools</h4>
                    </div>
                    <div class="modal-body">
                        <div class="box">
                                <label>Name: </label>
                                <input id=node_text>
                                <label>Wallet: </label>
                                <input id=wallet_text>
                                <button onclick="addNode_onclick()">Add Node</button>
                                <button onclick="deleteNode_onclick()">Delete Node</button>
                                <button onclick="update_onclick()">Update</button>
                                <button onclick="clear_onclick()">Clear</button>
                            </div>
                            
                            <br />
                            <div class="box">
                                <label>Relations: </label>
                                <select id="selec1"></select>
                                <select id="selec2"></select>
                                <input id=textValue>
                                <button onclick="addRel_onclick()">Add relation</button>
                                <button onclick="delRel_onclick()">Delete relation</button>
                                <button onclick="resRel_onclick()">Reset</button>
                            </div>
                    </div>
                    <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            
                </div>
            </div>

    </div>
    <script src = "graph.js"></script>
    <script>
        // Node text functions
        function get_textnode(){
            return document.getElementById('node_text').value;
        }
        function set_textnode(input){
            document.getElementById('node_text').value = input;
        }
        function clear_textnode(){
            set_textnode("");
        }

        // Wallet text functions
        function get_textwallet(){
            if(document.getElementById('wallet_text').value == ""){
                return "0";
            }
            return document.getElementById('wallet_text').value;
        }
        function set_textwallet(input){
            document.getElementById('wallet_text').value = input;
        }
        function clear_textwallet(){
            set_textwallet("");
        }
        
        // Value text functions
        function get_textvalue(){
            if(document.getElementById('textValue').value == ""){
                return "0";
            }
            return document.getElementById('textValue').value;
        }
        function set_textvalue(input){
            document.getElementById('textValue').value = input;
        }
        function clear_textvalue(){
            set_textvalue("");
        }
        
        // UI functions
        function addNode_onclick(){
            var text=get_textnode();
            var wallet = get_textwallet();
            var node = new Node(text, wallet)
            nodes.add(node);
            clear_textnode();
            clear_textwallet();
            update_graph();
        }
        function deleteNode_onclick(){
            var text = get_textnode();
            nodes.delete(text);
            clear_textnode();
            update_graph();
        }
        function update_onclick(){
            update_graph();
        }
        function clear_onclick(){
            nodes.delete_all();
            update_graph();
        }
        function addRel_onclick(){
            var nameA = document.getElementById('selec1').value;
            var nameB = document.getElementById('selec2').value;
            var nodeA = nodes.get(nameA);
            var nodeB = nodes.get(nameB);
            var arc = new Arc(nodeA, nodeB, get_textvalue());
            arcs.add(arc);
            clear_textvalue();
            update_graph();
        }
        function delRel_onclick(){
            var nameA = document.getElementById('selec1').value;
            var nameB = document.getElementById('selec2').value;
            var key = gen_arc_key(nameA, nameB);
            arcs.delete(key);
            clear_textvalue();
            update_graph();
        }
        function resRel_onclick(){
            arcs.delete_all();
            clear_textvalue();
            update_graph();
        }
    </script>

</body>
</html>